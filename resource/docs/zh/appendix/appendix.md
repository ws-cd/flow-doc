---
layout: default
title: 概念说明
nav_order: 2
---
# 概念说明
{: .no_toc .header }
---

## 意图
意图指用户的输入所表示的意义。我们认为用户的输入都隐含着某种特定的含义，并将这一类包含同一意义的语句赋予一个意图的标签。

### 例句
为了支持多种用户输入，减少机器人回答错误的可能性，对于每个意图，都支持多个例句。例句会作为训练样本，放入意图分类模型中进行训练。因此，例句的数量与质量在很大程度上决定了机器人回复的准确性。在例句的编辑上，我们希望不同意图之间的区分度尽量高，也就是说，不同意图的例句尽量不要重合；与此同时，同类意图中的例句的表达可以尽可能的丰富，举个例子：
- 意图1: 打招呼
  - 你好！
  - 你好。
- 意图2: 再见
  - 明天见
  - 拜拜
从模型训练的角度来说，意图1的泛化能力会弱于意图2。因此，如果您可以提供更多更独特的例句，模型的效果也会更好。

### 意图列表
意图列表是为了意图的复用而存在的。我们在对话中经常会遇见重复的意图，比如：确认，否认，感谢。此类意图往往会出现在对话流程的不同位置，而反复构建重复的意图是很繁琐且易出错的。意图列表的概念则是为了解决这个问题。我们可以将需要重复使用的意图保存为意图模板，增加到意图列表中，在项目的其他位置需要使用这一意图时，我们便可以直接引用已经保存的意图。这个设计的另一个优点是，在需要增加、修改、删除某个意图中的样本时，我们也只需要操作一遍。

我们强烈建议您尽量使用意图列表，一方面，意图的复用可以使设计更加简便；另一方面，相似意图的合并很大程度上能够提升模型的识别准确率。

### 意图分类准确性的保证
由于语言的多样性，往往需要提供更多的数据以供模型进行训练，以获得更好的识别性能。由于机器的泛化能力随着数据的增加而增强，因此，如果您发现该意图的识别准确率不够高，请依次确认:
1. 是否存在相似的未合并的意图。若有，请将意图合并，保存到意图列表中进行复用。
2. 意图中的例句是否过少。若该意图例句少于3条，或者存在不同意图的示例数量不平衡的情况，请酌情增加例句。
3. 用于测试的样例是否存在于两个或以上意图中。若存在，请重新整理您的意图，如果可能，请不要将相同的样例放到更多不同的意图中，这样会使模型混淆。

## 回答
回答指的是bot的回复。根据用户的不同输入，系统将回复不同的信息。

回答支持三种形式：
1. 文本
2. 图片
3. webhook
回答中必须包含一条文本信息。

### 回答列表
回答列表是为了回答的复用而存在的。我们在对话中经常会遇见重复的回答，比如：再见，调用同样的webhook，感谢。此类回答往往会出现在对话流程的不同位置，而反复构建重复的回答是很繁琐且易出错的。回答列表的概念则是为了解决这个问题。我们可以将需要重复使用的回答保存为回答模板，增加到回答列表中，在项目的其他位置需要使用这一回答时，我们便可以直接引用已经保存的回答。这个设计的另一个优点是，在需要增加、修改、删除某个回答时，我们也只需要操作一遍。

我们强烈建议您尽量使用回答列表，回答的复用可以使设计更加简便，大量节省您的流图构建时间。

## 变量
变量是bot的记忆，声明变量表示的是bot需要记忆哪些信息。举个例子，在订火车票的场景中，用户在与机器多轮对话的过程中提供所需的信息，比如目的地，出发时间，座位要求。这类信息需要被记录下来，直到对话结束，再根据实际情况决定这些变量的最终去向。如果没有变量，bot将无法记住对话过程中的任何信息。

### 变量的提取
变量的提取可以发生在对话流程中的任何一处。既可以从用户输入中提取，也可以手动设置。下面是变量提取的几种方式。
#### 实体提取
实体提取是变量提取中最常见的方式。通常用于提取用户输入中的部分信息，比如：时间、地点、姓名、手机号、具体信息等。我们提供了内置变量与标注变量两种方式。其中，内置变量为一些可以通过规则进行提取的变量，目前包含了日期、数字、电话、序数词，免去了您手动标注的麻烦，此类变量在后续的发布中还会持续更新。而标注变量则是针对一些特殊的情况，比如希望提取一些特定的词汇，这类词汇需要您手动进行标注，利用机器学习，由模型辅助进行预测与提取。与例句一样，通过提供多种多样的表达、尽量在例句中展示不同的实体词这两个方法，可以提高提取的准确率。

#### 输入文本
输入文本方式通常用于提取整个用户输入语句。常见的适用场景为：收集用户的反馈意见、询问是否有其他需求。这类场景通常需要完整记录用户发言，而并不需要从中提取某个特定的词组。需要注意的是，虽然我们不关心提取到的具体值，但是我们仍需要增加不同的例句，以保证模型了解当前的用户输入属于需要提取的意图，从而进行变量的提取。

#### 自定义值
自定义值方式与输入文本有相似之处，然而其常用场景一般为是否需要某项服务，换句话说，需要该变量填入有限的类别。举个例子，预定机票时，可能需要提问用户，需要靠窗的位置吗。此时我们期望填入的变量`windows`值为`True|False`，而不希望填入其他值。也就是说，不论用户说“是的”，还是“我要靠窗”，我们都希望`windows`变量置为`True`，因此，我们提供了自定义值的方式，可以根据用户的某一个意图确定填入哪个具体的值，该值是必填的，并且由您决定。

#### 重置变量值
上述方法都是从用户输入中提取变量的方法，如果需要在某个bot回复后提取变量，则可以使用重置变量值进行设置。这种设置方法与上文的三种方法的区别为：
1. 作用域不同。该方法的作用域为特定的上下文，也就是说，该重置只在当前的对话中生效；而上文的方法都是全局有效的。如果希望在对话的多个场景中有针对性的提取变量，请使用重置变量值。
2. 重置变量值可实现变量值的传递。基于用户输入的变量提取默认提取到同名的变量，如果需要复用某些内置变量，或者需要将某些变量值设为另一些已提取到的变量，可使用重置变量值。


## 用户问答（FAQ）
用户问答(FAQ)提供了一问一答的功能，简化了对话流程的设计。用户问答主要针对一类与流程关联性不大的问题，其特点是数量繁多，每个问题都有其答案，但对于对话流程并没有很大的影响。如果使用流图来定义，需要编辑大量的分支，一方面添加操作较繁琐，另一方面不便于流图的维护。因此，我们设计了用户问答功能，将此类问题的定义独立出来，并不影响整体的流图。

## 表单
针对多信息收集的场景：订机票、订酒店、订单售后等，我们设计了表单功能，由机器操作进行信息收集，只需要一些必要且少量的设置，即可实现复杂流程的设计。
以下是表单设计中的几个相关概念的介绍。

### 信息列表(Slots)
信息列表定义了表单所需收集的几个变量，机器人如何针对这些变量进行询问以及用户如何回答，变量如何提取。当有多种提取方式时，可依次写出。机器人会依照顺序依次询问用户，直到收集完成所有变量，注意，机器人在询问时会跳过已赋值的变量。

### 用户其他请求(Interrupts)
用户并不一定会按照我们期望的方式回答，事实上，我们希望机器可以更加智能的处理用户的输入。比如，当我们正在询问某一个信息时，如果用户这时提出“我不想继续填了”，我们希望能够妥善退出表单。这时，我们可以利用`用户其他请求`，在这个分支下增加用户可能的发言，并给出相应的回复。如果用户需要退出，也可以在该部分进行表示，如果有需要的话，也支持在表单外继续该分支。

### 收集成功(Confirm)
当表单填写没有失败，所有变量都填写完毕，正常跳出表单时，会执行该节点后的所有流程。通常该节点后面需要进行先前所有变量的确认，也可以直接通过系统回复提交到外部api。